!function(a,b,c,d){function e(a){var a=a,b=a.getPublicApi();this.on=function(){return b.on.apply(b,arguments)},this.off=function(){return b.off.apply(b,arguments)},this.action=function(){return b.action.apply(b,arguments)},this.set=function(){return b.set.apply(b,arguments)},this.get=function(){return b.get.apply(b,arguments)}}var f,g={dashboardRootUrl:"https://app.purechat.com",apiRootUrl:"https://api.purechat.com",pingQueueUrl:"https://checkin.purechat.com/api/checkin",pidCookieName:"prodvtftwPID",pingInterval:5e3,sessionTimeout:12e5};window._pcCallbackCounter=0;var h={Utilities:{Extend:function(){var a=Array.prototype.slice.call(arguments),b=a.shift(),c="";"string"!=typeof b&&"boolean"!=typeof b||(c=b===!0?"deep":b,b=a.shift(),"defaults"==c&&(b=h.Utilities.Extend({},b),c="strict"));for(var d=0,e=a.length;d<e;d++){var f=a[d];for(var g in f)"deep"==c&&"object"==typeof f[g]&&"undefined"!=typeof b[g]?h.Utilities.Extend(c,b[g],f[g]):("strict"!=c||"strict"==c&&"undefined"!=typeof b[g])&&(b[g]=f[g])}return b}},Ajax:{JSONPTimeout:null,URLs:{Base:{ChatServer:"",PureServer:"",CdnServer:"",ApiCdnServer:""}},CreateJSONPRequest:function(a,b,c,d,e){var f="_WidgetJPCB"+_pcCallbackCounter;window[f]=c;var g=document.createElement("script");g.async=!0,g.type="text/javascript",_pcCallbackCounter++,g.src=(d||h.Ajax.URLs.Base.ApiServer)+a,g.src+=(g.src.lastIndexOf("/")!=g.src.length-1?"/":"")+f,g.src+=e?".js":"";var i=!1;g.onload=g.onreadystatechange=function(){i||this.readyState&&"loaded"!=this.readyState&&"complete"!=this.readyState||(i=!0,h.Ajax.JSONPTimeout=clearTimeout(h.Ajax["JSONPTimeout"+f]),delete window[f])},g.src.indexOf("?")<0&&(g.src+="?_=_");for(var j in b)b.hasOwnProperty(j)&&(g.src+="&"+j+"="+b[j]);window.location.search.indexOf("pcforcemobile")>=0&&(g.src+="&forceMobile=true"),document.getElementsByTagName("HEAD")[0].appendChild(g),h.Ajax["JSONPTimeout"+f]=setTimeout(function(){throw"Widget Settings failed to download"},2e4)},GetWidgetSettings:function(a,b){h.Ajax.CreateJSONPRequest("/VisitorWidget/Widget/"+(a.overrideWidgetId||a.widgetId)+"/"+a.widgetVersion,{},b,h.Ajax.URLs.Base.ApiCdnServer,!0)},GetWidgetVersionSettings:function(a,b){h.Ajax.CreateJSONPRequest("/VisitorWidget/WidgetVersions/"+a.widgetId,{},b)},GetDashboardVersion:function(a){h.Ajax.CreateJSONPRequest("/version",{},a,h.Ajax.URLs.Base.PureServer)}},Widget:{Availability:null,CurrentInstance:null,GetWidgetVersionSettings:function(a,b){h.Ajax.GetWidgetVersionSettings(a,b)},GetWidgetSettings:function(a,b){h.Ajax.GetWidgetSettings(a,b)},GetDashboardVersion:function(a){h.Ajax.GetDashboardVersion(a)}},Load:{Widget:function(a,b){function c(){if(window.jQuery&&window.jQuery!=i){window.$pureChatJquery=window.jQuery.noConflict(!0);var c=function(){if(a.hasAllSettings=!0,a.pureServerUrl=h.Ajax.URLs.Base.PureServer,a.cdnServerUrl=h.Ajax.URLs.Base.CdnServer,a.apiCdnServerUrl=h.Ajax.URLs.Base.ApiCdnServer,window._pcwi&&delete window._pcwi,f=new _PCWidget(a),window.purechatApi){var c=window.purechatApi.l,d=window.purechatApi.t;window.purechatApi=new e(f),c.forEach(function(a,b){window.purechatApi.on.apply(window.purechatApi,a)}),d.forEach(function(a,b){window.purechatApi.action.apply(window.purechatApi,a)})}b(f)};window.$pureChatJquery(function(){var b=document.createElement("script");b.async=!0,b.type="text/javascript",b.src=h.Ajax.URLs.Base.CdnServer+"/Scripts/widgetjs/widgetscript-combine.v-"+a.Version+".js",document.getElementsByTagName("HEAD").item(0).appendChild(b);var d=!1;b.onload=b.onreadystatechange=function(a){d||this.readyState&&"loaded"!=this.readyState&&"complete"!=this.readyState||(d=!0,c())}})}i=null}var d=!1;if(!a.ChatQuotaReached&&!a.Stop)if(a.AllowedDomains="undefined"!=typeof a.AllowedDomains?a.AllowedDomains:[],a.AllowedDomains.length>0){a.AllowedDomains.push("purechat.com");for(var g=0;g<a.AllowedDomains.length;g++)if(/^\*$/.test(a.AllowedDomains[g])||document.domain.search(a.AllowedDomains[g])!=-1){d=!0;break}}else d=!0;if(d){var i=window.jQuery,j=document.createElement("script");j.async=!0,j.type="text/javascript",j.src="//ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js";var k=!1;j.onload=j.onreadystatechange=function(a){k||this.readyState&&"loaded"!=this.readyState&&"complete"!=this.readyState||(k=!0,c())},j.onerror=function(a){k=!0;var b=document.createElement("script");b.async=!0,b.type="text/javascript",b.src=h.Ajax.URLs.Base.CdnServer+"/scripts/jquery-1.7.2.min.js";var d=!1;b.onload=b.onreadystatechange=function(a){d||this.readyState&&"loaded"!=this.readyState&&"complete"!=this.readyState||(d=!0,c())},document.getElementsByTagName("HEAD").item(0).appendChild(b)},document.getElementsByTagName("HEAD").item(0).appendChild(j)}}},MapWidgetVersionsResponse:function(a){var b={};for(var c in a){var d=a[c];switch(c){case"v":b.Valid=1==d;break;case"sv":b.Version=d;break;case"cv":b.CssVersion=d;break;case"cr":b.CssRootUrl=d;break;case"wv":b.WidgetVersion=d;break;case"csu":b.ChatServerUrl=d;break;case"sru":b.SiteRootUrl=d;break;case"dap":b.DisableAvailabilityPings=1==d;break;case"ip":b.VisitorIPAddress=d;break;case"rfm":b.RequestFromMobileDevice=1==d;break;case"aom":b.AllowWidgetOnMobile=1==d;break;case"b":b.IPIsBanned=1==d;break;case"bd":b.BrowserDetails=d;break;case"cru":b.CdnRootUrl=d;break;case"acru":b.ApiCdnRootUrl=d;break;case"id":b.Id=d;break;case"s":b.Stop=1==d;break;case"qe":b.QuotaExceeded=1==d;break;default:b[c]=d}}return b},Init:function(a,b){a=h.Utilities.Extend({accountId:"",chatServerUrl:"",checkWidgetAvailableInterval:2e4,config:{},connectionSettings:{},dataController:null,insertElement:null,isOperator:!1,isWidget:!1,apiServerUrl:g.apiRootUrl,pureServerUrl:g.dashboardRootUrl,renderInto:"body",userProperties:{userId:null,displayName:null,authToken:null,roomId:null,chatId:null},widgetId:""},a),h.Ajax.URLs.Base.ChatServer=a.chatServerUrl,h.Ajax.URLs.Base.PureServer=a.pureServerUrl,h.Ajax.URLs.Base.ApiServer=a.apiServerUrl,h.Widget.GetWidgetVersionSettings(a,function(c){h.Widget.GetDashboardVersion(function(d){if(c.sv=d.v,c=h.MapWidgetVersionsResponse(c),!c.QuotaExceeded&&!c.Stop){h.Ajax.URLs.Base.PureServer=c.SiteRootUrl,h.Ajax.URLs.Base.CdnServer=c.CdnRootUrl,h.Ajax.URLs.Base.ApiCdnServer=c.ApiCdnRootUrl;h.Ajax.URLs.Base.ChatServer=c.ChatServerUrl||"",a.widgetVersion=c.WidgetVersion,h.Widget.GetWidgetSettings(a,function(d){var e=h.Utilities.Extend(d,c);e=h.Utilities.Extend(e,a);h.Load.Widget(e,function(a){b(a)})})}})})}};window.PCWidgetLoader=window.PCWidget=function(a){var b=this,c={};for(var d in a)switch(d.toLowerCase().trim()){case"c":c.widgetId=a[d];break;case"o":c.overrideWidgetId=a[d];break;case"pureserverurl":c.pureServerUrl=a[d];break;case"chatserverurl":c.chatServerUrl=a[d];break;case"f":c.isWidget=a[d]}try{localStorage.setItem("_purechatLocalStorageAccess",!0)}catch(e){throw console.log("Local storage access is not allowed. This is a problem with some browsers running private windows."),console.log(e),new Error("Local storage access is not allowed. This is a problem with some browsers running private windows.")}b.set=function(){this._pcWidget&&this._pcWidget.getPublicApi().set.apply(this._pcWidget.getPublicApi(),arguments)},b.get=function(){this._pcWidget&&this._pcWidget.getPublicApi().get.apply(this._pcWidget.getPublicApi(),arguments)},b.on=function(){this._pcWidget&&this._pcWidget.getPublicApi().on.apply(this._pcWidget.getPublicApi(),arguments)},b.trigger=function(){this._pcWidget&&this._pcWidget.getPublicApi().trigger.apply(this._pcWidget.getPublicApi(),arguments)},h.Init(c,function(a){b._pcWidget=a})}}(null,function(){return this}());